{{define "content"}}
  <main>
    <h1>Materiales</h1>

    {{if .ErrorMessage}}
      <p class="status status-error" role="alert"><span class="badge badge-error">[ERROR]</span> {{.ErrorMessage}}</p>
    {{end}}
    {{if .SuccessMessage}}
      <p class="status status-ok" role="status"><span class="badge badge-ok">[OK]</span> {{.SuccessMessage}}</p>
    {{end}}

    <h2>Nuevo material</h2>
    <form method="post" action="/admin/materials" class="form-grid">
      <div class="form-row">
        <label for="new_name">name</label>
        <input id="new_name" name="name" type="text" required />
      </div>

      <div class="form-row">
        <label for="new_cost_per_kg">cost_per_kg</label>
        <input id="new_cost_per_kg" name="cost_per_kg" type="number" step="any" min="0.0000001" required />
      </div>

      <div class="form-row">
        <label for="new_notes">notes</label>
        <input id="new_notes" name="notes" type="text" />
      </div>

      <button type="submit">Crear</button>
    </form>

    <div class="terminal-divider">lista</div>
    {{if .Materials}}
      <div class="list-shell">
        {{range .Materials}}
          <form method="post" action="/admin/materials/{{.ID}}" class="list-item form-stack">
            <div class="list-item-header">
              <p><strong>ID:</strong> {{.ID}}</p>
              <span class="badge {{if .Active}}badge-ok{{else}}badge-warn{{end}}">{{if .Active}}[OK]{{else}}[WARN]{{end}} {{if .Active}}activo{{else}}inactivo{{end}}</span>
            </div>

            <div class="form-grid">
              <div class="form-row">
                <label for="name_{{.ID}}">name</label>
                <input id="name_{{.ID}}" name="name" type="text" value="{{.Name}}" required />
              </div>

              <div class="form-row">
                <label for="cost_per_kg_{{.ID}}">cost_per_kg</label>
                <input id="cost_per_kg_{{.ID}}" name="cost_per_kg" type="number" step="any" min="0.0000001" value="{{.CostPerKg}}" required />
              </div>

              <div class="form-row">
                <label for="notes_{{.ID}}">notes</label>
                <input id="notes_{{.ID}}" name="notes" type="text" value="{{.Notes}}" />
              </div>
            </div>

            <input type="hidden" name="active" value="0" />
            <div class="form-row">
              <label for="active_{{.ID}}">activo</label>
              <input id="active_{{.ID}}" name="active" type="checkbox" value="1" {{if .Active}}checked{{end}} />
            </div>

            <button type="submit">Editar</button>
          </form>
        {{end}}
      </div>
    {{else}}
      <p class="empty-state">No hay materiales creados.</p>
    {{end}}

    <p><a href="/">Volver al inicio</a></p>
  </main>
{{end}}
